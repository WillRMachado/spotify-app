(this["webpackJsonpspotify-app"]=this["webpackJsonpspotify-app"]||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/Spotify_Icon_RGB_White.cc4e2784.png"},38:function(e,t,a){e.exports=a(74)},43:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),l=(a(43),a(12)),i=a(11),u=a(13),s=a.n(u),m=a(2),d=a(35),f=a.n(d).a.create({baseURL:"https://api.spotify.com/v1",headers:{accept:"application/json","content-type":"application/json"}});a(66);var p=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.search.text})),a=Object(m.c)((function(e){return e.spotify.token}));function c(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.awrap(f.get("/search",{params:{q:"*"+t+"*",type:"artist,album,track"},headers:{authorization:"Bearer "+window.localStorage.getItem("spotifyToken")}}).then((function(e){l(e),o()})).catch((function(e){setTimeout((""==window.localStorage.getItem("spotifyToken")?window.localStorage.setItem("spotifyToken",""):window.localStorage.getItem("spotifyToken")==a&&window.localStorage.setItem("spotifyToken","expired"),o(),void c()),2e3)})));case 2:case"end":return e.stop()}}))}Object(n.useEffect)((function(){o()}),[]),Object(n.useEffect)((function(){o(),c()}),[a,t]);var o=function(){e(function(e){return{type:"ADD_TOKEN",token:e}}(window.localStorage.getItem("spotifyToken")))},l=function(t){e(function(e){return{type:"SET_SEARCH",data:e}}(t))};return r.a.createElement("div",{className:"searchBox"},r.a.createElement("h5",null,"Busque por artistas, \xe1lbuns ou m\xfasicas"),r.a.createElement("input",{className:"searchInput",type:"text",id:"search",placeholder:"Comece a escrever...",value:t,onChange:function(t){return a=t.target.value,void e(function(e){return{type:"TYPE",text:e}}(a));var a}}),r.a.createElement("hr",null))};a(67);var E=function(e){var t=e.img,a=e.name,n=e.artist,c=e.id;return r.a.createElement(l.b,{to:"album/#album_id="+c},r.a.createElement("div",{className:"albumItem"},r.a.createElement("img",{src:t,className:"albumImage",alt:"album cover"}),r.a.createElement("h4",{className:"albumName"},a),r.a.createElement("h5",{className:"albumArtistName"},n)))};a(69);var v=function(){var e=Object(m.c)((function(e){return e.searchResults})),t=Object(m.c)((function(e){return e.search.text})),a=e.data,n=(a=void 0===a?[]:a).data,c=(n=void 0===n?[]:n).albums,o=void 0===c?{items:[]}:c;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"searchWrapper"},r.a.createElement("h3",null,t?'Resultados para "'.concat(t,'"'):""),r.a.createElement("div",{className:"searchResultBox"},o.items.map((function(e){return r.a.createElement("div",{key:e.id,className:"searchResult"},r.a.createElement(E,{img:e.images[1].url,name:e.name,artist:e.artists[0].name,id:e.id}))})))))};var g=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p,null),r.a.createElement(v,null))},b=a(18),h=a.n(b);a(70);var y=function(){return window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return window.localStorage.setItem("spotifyToken",e.access_token),e}),{}),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"loggedInWrapper"},r.a.createElement("h1",{className:"loggedInContent"},"Voc\xea est\xe1 logado, e j\xe1 pode fechar esta p\xe1gina"),r.a.createElement("img",{src:h.a,className:"spotifyLogoLogged",alt:"spotify logo logged"})))},w=a(19),k=(a(71),function(e){var t=e.url,a=e.name,c=e.duration,o=e.t_number,l=function(e){var t=Object(n.useState)(new Audio(e)),a=Object(w.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(!1),l=Object(w.a)(o,2),i=l[0],u=l[1];return Object(n.useEffect)((function(){i?r.play():r.pause()}),[i]),Object(n.useEffect)((function(){return r.addEventListener("ended",(function(){return u(!1)})),function(){r.removeEventListener("ended",(function(){return u(!1)}))}}),[]),Object(n.useEffect)((function(){c(new Audio(e))}),[e]),[i,function(){return u(!i)}]}(t),i=Object(w.a)(l,2),u=i[0],s=i[1];return r.a.createElement("div",{onClick:s},r.a.createElement("div",{className:"trackNameContainer"},r.a.createElement("h5",null,o,". "),r.a.createElement("h4",{className:"trackName"},a),r.a.createElement("h5",{className:"trackDuration"},c)),r.a.createElement("div",{className:u?"trackFillPlaying":"trackFillNotPlaying"}))});a(72);var N=function(){var e=Object(m.b)(),t=window.localStorage.getItem("spotifyToken"),a=Object(m.c)((function(e){return e.albumData.data})),c=a.data?a.data.images[1].url:"",o=a.data?a.data.tracks.items:[],i=a.data?a.data.name:"",u=a.data?a.data.artists[0].name:"";console.log(o);var d=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e}),{});Object(n.useEffect)((function(){s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.awrap(f.get("/albums/"+d.album_id,{headers:{authorization:"Bearer "+t}}).then((function(e){p(e)})));case 2:case"end":return e.stop()}}))}),[]);var p=function(t){e(function(e){return{type:"SET_ALBUM_DATA",data:e}}(t))};function E(e){var t=Math.floor(e/6e4),a=(e%6e4/1e3).toFixed(0);return t+":"+(a<10?"0":"")+a}return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{to:"/"},r.a.createElement("div",{className:"returnFromAlbumDetails"}," < Voltar")),r.a.createElement("div",{className:"albumDetails"},r.a.createElement("div",{className:"albumCoverDetails"},r.a.createElement("img",{src:c,className:"albumDetailImage",alt:"album Detail Cover"}),r.a.createElement("h3",null,i),r.a.createElement("h4",null,u)),r.a.createElement("div",{className:"albumDetailTracksWrapper"},o.map((function(e){return r.a.createElement("div",{key:e.track_number},r.a.createElement(k,{t_number:e.track_number,url:e.preview_url,name:e.name,duration:E(e.duration_ms)}))})))))};function j(){return r.a.createElement(l.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",exact:!0,component:g}),r.a.createElement(i.a,{path:"/spotify-login",component:y}),r.a.createElement(i.a,{path:"/album",component:N})))}var O=a(37),T=a.n(O);a(73);var S=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.spotify.token}));console.log(t),Object(n.useEffect)((function(){a()}),[t]);var a=function(){e(function(e){return{type:"ADD_TOKEN",token:e}}(window.localStorage.getItem("spotifyToken")))};return r.a.createElement(T.a,{url:"https://accounts.spotify.com/authorize?client_id=0269347a0b89494a952339ac5aaf8f94&response_type=token&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fspotify-login"},r.a.createElement("div",{className:"oAuth"},""==t?"Clique aqui para logar no Spotify":"","expired"==t?"Clique aqui para logar novamente no Spotify":""))},_=a(15),x=a(9),A={token:""},I={text:"",data:""},D={data:""},C={data:""},R=Object(_.b)({spotify:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TOKEN":return Object(x.a)({},e,{token:t.token});case"RESET":return A;default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TYPE":return Object(x.a)({},e,{text:t.text});case"SEARCH":return Object(x.a)({},e,{data:t.data});case"RESET":return I;default:return e}},searchResults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH":return Object(x.a)({},e,{data:t.data});case"RESET":return D;default:return e}},albumData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ALBUM_DATA":return Object(x.a)({},e,{data:t.data});case"RESET":return C;default:return e}}}),F=Object(_.c)(R);var B=function(){return window.close(),r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{store:F},r.a.createElement("div",{className:"app"},r.a.createElement("img",{src:h.a,className:"spotifyLogo",alt:"album Detail Cover"}),r.a.createElement(S,null),r.a.createElement("div",{className:"contentContainer"},r.a.createElement(j,null)))))};o.a.render(r.a.createElement(B,null),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.bdd173a0.chunk.js.map